# âš ï¸ é‡è¦ï¼šéœ€è¦é‡æ–°éƒ¨ç½² Edge Function

## ç¯å¢ƒå˜é‡åç§°å·²æ›´æ–°

æ‚¨ä¿®æ”¹äº†ä»¥ä¸‹ç¯å¢ƒå˜é‡çš„åç§°ï¼š
- `SUPABASE_URL` â†’ `SUPA_URL` âœ…
- `SUPABASE_SERVICE_ROLE_KEY` â†’ `SUPA_SERVICE_ROLE_KEY` âœ…

ä»£ç å·²ç»æ›´æ–°å®Œæˆï¼

---

## ğŸ”„ éœ€è¦é‡æ–°éƒ¨ç½² Edge Function

ç”±äºç¯å¢ƒå˜é‡åç§°å˜æ›´ï¼Œæ‚¨éœ€è¦**é‡æ–°éƒ¨ç½²** Edge Functionï¼š

### æ–¹æ³• 1ï¼šé€šè¿‡ Supabase Dashboardï¼ˆæ¨èï¼‰

1. è®¿é—®ï¼šhttps://supabase.com/dashboard/project/mgjiwtrumkcmbhruqbou/functions

2. æ‰¾åˆ° `evaluate-pronunciation` å‡½æ•°ï¼Œç‚¹å‡»è¿›å…¥

3. ç‚¹å‡» **"Edit"** æˆ– **é‡æ–°éƒ¨ç½²** æŒ‰é’®

4. å¤åˆ¶æ›´æ–°åçš„ä»£ç æ–‡ä»¶å†…å®¹ï¼š
   ```
   /Users/takanoriiwata/Downloads/english-practice-dashboard/supabase/functions/evaluate-pronunciation/combined-for-dashboard.ts
   ```

5. ç²˜è´´åˆ°ç¼–è¾‘å™¨ä¸­ï¼ˆæ›¿æ¢æ—§ä»£ç ï¼‰

6. ç‚¹å‡» **"Deploy"** é‡æ–°éƒ¨ç½²

7. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦30ç§’ï¼‰

---

## âœ… ç¡®è®¤ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®

è¯·ç¡®ä¿åœ¨ Supabase ä¸­è®¾ç½®äº†ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

è®¿é—®ï¼šhttps://supabase.com/dashboard/project/mgjiwtrumkcmbhruqbou/settings/functions

ç¡®è®¤æœ‰ä»¥ä¸‹ 6 ä¸ªå˜é‡ï¼š

| å˜é‡å | å€¼ |
|--------|-----|
| `IFLYTEK_APPID` | `ga8b82c6` |
| `IFLYTEK_API_KEY` | `d3c7a90d332a3ee97bbc710dcf45c746` |
| `IFLYTEK_API_SECRET` | `7e4dbedce4d8353423b031572fb27d13` |
| `VERCEL_BLOB_READ_WRITE_TOKEN` | `vercel_blob_rw_xFlCgDeYjZUxTWHU_u0m9GK5MpFV0zJ6kALmRhKr3lRG4qP` |
| `SUPA_URL` â¬…ï¸ æ–°åç§° | `https://mgjiwtrumkcmbhruqbou.supabase.co` |
| `SUPA_SERVICE_ROLE_KEY` â¬…ï¸ æ–°åç§° | `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...` |

---

## ğŸ§ª é‡æ–°éƒ¨ç½²åæµ‹è¯•

å®Œæˆé‡æ–°éƒ¨ç½²åï¼Œè¯·æµ‹è¯•åŠŸèƒ½ï¼š

1. è®¿é—®ï¼šhttp://localhost:3000

2. ç‚¹å‡» **"å‘éŸ³ç»ƒä¹ "**

3. å°è¯•å½•éŸ³å¹¶è¯„æµ‹ä¸€ä¸ªå•è¯

4. æ£€æŸ¥æ˜¯å¦èƒ½æ­£å¸¸è·å¾—è¯„åˆ†ç»“æœ

---

## ğŸ“ å·²æ›´æ–°çš„æ–‡ä»¶

ä»¥ä¸‹æ–‡ä»¶å·²è‡ªåŠ¨æ›´æ–°ä»¥åŒ¹é…æ–°çš„ç¯å¢ƒå˜é‡åç§°ï¼š

- âœ… `supabase/functions/evaluate-pronunciation/index.ts`
- âœ… `supabase/functions/evaluate-pronunciation/combined-for-dashboard.ts`

---

## â“ å¦‚æœé‡åˆ°é—®é¢˜

### é”™è¯¯ï¼šiFlyTek credentials not configured

**åŸå› **ï¼šç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ

**è§£å†³**ï¼š
1. ç¡®è®¤ç¯å¢ƒå˜é‡åç§°å®Œå…¨æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
2. é‡æ–°éƒ¨ç½² Edge Function
3. ç­‰å¾…å‡ åˆ†é’Ÿè®©é…ç½®ç”Ÿæ•ˆ

### é”™è¯¯ï¼šSupabase credentials not configured

**åŸå› **ï¼š`SUPA_URL` æˆ– `SUPA_SERVICE_ROLE_KEY` æœªè®¾ç½®

**è§£å†³**ï¼š
1. æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®é¡µé¢
2. ç¡®è®¤å˜é‡åä¸º `SUPA_URL` å’Œ `SUPA_SERVICE_ROLE_KEY`ï¼ˆä¸æ˜¯æ—§åç§°ï¼‰
3. é‡æ–°éƒ¨ç½² Edge Function

---

å®Œæˆé‡æ–°éƒ¨ç½²åï¼Œç³»ç»Ÿå°±èƒ½æ­£å¸¸å·¥ä½œäº†ï¼ğŸš€
